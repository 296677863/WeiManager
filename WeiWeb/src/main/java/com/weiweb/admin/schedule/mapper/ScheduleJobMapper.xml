<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.weiweb.admin.schedule.dao.ScheduleJobMapper">

	<!-- 可根据自己的需求，是否要使用 -->
    <resultMap id="BaseResultMap" type="com.weiweb.admin.schedule.model.ScheduleJobModel" >
        <result property="jobId" column="job_id"/>
        <result property="beanName" column="bean_name"/>
        <result property="methodName" column="method_name"/>
        <result property="params" column="params"/>
        <result property="cronExpression" column="cron_expression"/>
        <result property="status" column="status"/>
        <result property="remark" column="remark"/>
        <result property="createTime" column="create_time"/>
        <result property="gmtCreate" column="gmt_create"/>
        <result property="gmtModified" column="gmt_modified"/>
    </resultMap>
<sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Aug 25 14:05:11 CST 2017.
    -->
   	`job_id`, 		`bean_name`, 		`method_name`, 		`params`, 		`cron_expression`, 		`status`, 		`remark`, 		`create_time`, 		`gmt_create`, 		`gmt_modified`	  </sql>
  
  <sql id="limit_sql">
  	   <if test="page_sql != null and page_sql != ''">
      	${page_sql}
      </if>
  </sql>
  
  <sql id="where_all">
  	<where>
  	<if test="findContent != null and findContent !='' " >
        and (
        LOWER(name) like CONCAT("%",#{findContent,jdbcType=VARCHAR},"%") or
        LOWER(type) like CONCAT("%",#{findContent,jdbcType=VARCHAR},"%")
        )
      </if>
      </where>
  </sql>
  
    <select id="findAll" resultMap="BaseResultMap" >
  	 select 
    <include refid="Base_Column_List" />
    from schedule_job
    <include refid="where_all"/>
    <include refid="limit_sql" />
  </select>
  
  
  <select id="findCount" resultMap="BaseResultMap" >
 	 select count(job_id) from  schedule_job
  	<include refid="where_all" />
  </select>
  
    <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from schedule_job
    where job_id = #{jobId}
  </select>
  
   <insert id="insertSelective"  parameterType="com.weiweb.admin.schedule.model.ScheduleJobModel">
    <selectKey keyProperty="jobId" order="AFTER" resultType="java.lang.Long">
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into schedule_job
    <trim prefix="(" suffix=")" suffixOverrides=",">   
    	 <if test="jobId != null">
	job_id , 	</if>
		 <if test="beanName != null">
	bean_name , 	</if>
		 <if test="methodName != null">
	method_name , 	</if>
		 <if test="params != null">
	params , 	</if>
		 <if test="cronExpression != null">
	cron_expression , 	</if>
		 <if test="status != null">
	status , 	</if>
		 <if test="remark != null">
	remark , 	</if>
		 <if test="createTime != null">
	create_time , 	</if>
		 <if test="gmtCreate != null">
	gmt_create , 	</if>
		 <if test="gmtModified != null">
	gmt_modified 	</if>
	    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
     	 <if test="jobId != null">
	 #{jobId} , 	</if>
		 <if test="beanName != null">
	 #{beanName} , 	</if>
		 <if test="methodName != null">
	 #{methodName} , 	</if>
		 <if test="params != null">
	 #{params} , 	</if>
		 <if test="cronExpression != null">
	 #{cronExpression} , 	</if>
		 <if test="status != null">
	 #{status} , 	</if>
		 <if test="remark != null">
	 #{remark} , 	</if>
		 <if test="createTime != null">
	 #{createTime} , 	</if>
		 <if test="gmtCreate != null">
	 #{gmtCreate} , 	</if>
		 <if test="gmtModified != null">
	 #{gmtModified} 	</if>
	    </trim>
   
  </insert>
  
   <update id="updateByPrimaryKeySelective" parameterType="com.weiweb.admin.schedule.model.ScheduleJobModel">
  
    update schedule_job
    <set>
	
		 <if test="jobId != null">
	job_id = #{jobId} , 	</if>
		 <if test="beanName != null">
	bean_name = #{beanName} , 	</if>
		 <if test="methodName != null">
	method_name = #{methodName} , 	</if>
		 <if test="params != null">
	params = #{params} , 	</if>
		 <if test="cronExpression != null">
	cron_expression = #{cronExpression} , 	</if>
		 <if test="status != null">
	status = #{status} , 	</if>
		 <if test="remark != null">
	remark = #{remark} , 	</if>
		 <if test="createTime != null">
	create_time = #{createTime} , 	</if>
		 <if test="gmtCreate != null">
	gmt_create = #{gmtCreate} , 	</if>
		 <if test="gmtModified != null">
	gmt_modified = #{gmtModified} 	</if>
	     
    </set>
    where job_id = #{jobId}
  </update>
  
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
  
    delete from schedule_job
    where job_id = #{jobId}
  </delete>
  
  <select id="queryListBybeanName" parameterType="java.lang.String" resultMap="BaseResultMap" >
  	select job_id,bean_name,method_name,params,cron_expression,status,remark,create_time  from schedule_job job 
  	where 1=1 
  	 <if test="beanName != null">
  	    and bean_name=#{beanName}
  	 </if>
  	   and status = 0 
  </select>
  
	 <insert id="insert" parameterType="com.weiweb.admin.schedule.model.ScheduleJobModel">
   
    <selectKey keyProperty="job_id" order="AFTER" resultType="java.lang.String">
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into  schedule_job 
	(
		`job_id`, 		`bean_name`, 		`method_name`, 		`params`, 		`cron_expression`, 		`status`, 		`remark`, 		`create_time`, 		`gmt_create`, 		`gmt_modified`	      )
    values (
	
			#{jobId}, 
		
   
			#{beanName}, 
		
   
			#{methodName}, 
		
   
			#{params}, 
		
   
			#{cronExpression}, 
		
   
			#{status}, 
		
   
			#{remark}, 
		
   
			#{createTime}, 
		
   
			#{gmtCreate}, 
		
   
			#{gmtModified}
		
   	
      )
  </insert>
 



	

	<update id="updateByPrimaryKey" parameterType="com.weiweb.admin.schedule.model.ScheduleJobModel">
  
    update schedule_job 
    		<set>
			<if test="beanName != null">`bean_name` = #{beanName}, </if>
			<if test="methodName != null">`method_name` = #{methodName}, </if>
			<if test="params != null">`params` = #{params}, </if>
			<if test="cronExpression != null">`cron_expression` = #{cronExpression}, </if>
			<if test="status != null">`status` = #{status}, </if>
			<if test="remark != null">`remark` = #{remark}, </if>
			<if test="createTime != null">`create_time` = #{createTime}, </if>
			<if test="gmtCreate != null">`gmt_create` = #{gmtCreate}, </if>
			<if test="gmtModified != null">`gmt_modified` = #{gmtModified}</if>
		</set>
   	where job_id = #{jobId}
	</update>
	

</mapper>